// Test integer arithmetic operations

// Addition
assert((0 + 0) == 0);
assert((1 + 2) == 3);
assert((10 + -5) == 5);
assert((-5 + -5) == -10);

// Subtraction
assert((0 - 0) == 0);
assert((10 - 5) == 5);
assert((5 - 10) == -5);
assert((-5 - 5) == -10);
assert((-5 - -5) == 0);

// Multiplication
assert((1 * 1) == 1);
assert((10 * 5) == 50);
assert((10 * -5) == -50);
assert((-10 * -5) == 50);
assert((10 * 0) == 0);

// Integer division (truncated division)
assert(10 _/ 3 == 3);
assert(10 _/ 2 == 5);
assert(-7 _/ 2 == -3);

// Modulo
assert((10 % 3) == 1);
assert((10 % -3) == 1);
assert((-10 % 3) == -1);
assert((-10 % -3) == -1);
assert((12 % 3) == 0);
assert((0 % 3) == 0);

// Operator precedence
assert(2 + 3 * 4 == 14);
assert(2 * 3 + 4 == 10);
assert(10 - 2 * 3 == 4);
assert((2 + 3) * 4 == 20);
assert(10 / 2 + 3 == 8);
assert(10 / (2 + 3) == 2);
assert(10 % 3 + 2 == 3);
assert(10 % (3 + 2) == 0);
assert(1 << 2 + 1 == 8);
assert((1 << 2) + 1 == 5);
assert((1 | 2 & 3) == 3);
assert((3 ^ 2 & 1) == 3);

// Arithmetic assignment operations
// Test the value of the expressions as well as their side effects
let var a = 333;

a += 111;
assert(a == 444);
assert((a += 1) == 445);
assert(a        == 445);
assert((++a) == 446);
assert(a     == 446);
assert((--a) == 445);
assert(a     == 445);
assert((a -= 45) == 400);
assert(a         == 400);
assert((a -= 0) == 400);
assert(a        == 400);
assert((a *= 2) == 800);
assert(a        == 800);
assert((a /= 4) == 200);
assert(a        == 200);
a = 200; // division makes a float, reset to int
assert((a _/= 3) == 66);
assert(a         == 66);
assert((a %= 7) == 3);
assert(a        == 3);
assert((a <<= 2) == 12);
assert(a         == 12);
assert((a >>= 1) == 6);
assert(a         == 6);
assert((a |= 128) == 134);
assert(a          == 134);
assert((a &= 7) == 6);
assert(a        == 6);
assert((a ^= 255) == 249);
assert(a          == 249);

$println("all integer arithmetic tests passed");
